#!/bin/sh

anlix_bootup_defaults() {
	ifconfig wlan0 up
	iwpriv wlan0 set_mib xcap=30
	iwpriv wlan0 set_mib ther=32
	iwpriv wlan0 set_mib pwrlevelCCK_A=57555452504f4d4d4d4d4d4d4d4d
	iwpriv wlan0 set_mib pwrlevelCCK_B=61616060605f5f5e5d5c5b5a5959
	iwpriv wlan0 set_mib pwrlevelHT40_1S_A=515151504e4d4d4d4c4c4c4c4c4c
	iwpriv wlan0 set_mib pwrlevelHT40_1S_B=5f5f5f5e5d5c5b5b5a5a59595959
	iwpriv wlan0 set_mib pwrdiffHT40_2S=fdfdfdfdfdfdfdfdfdfdfdfdfdfd
	iwpriv wlan0 set_mib pwrdiffHT20=00ffffff00011000110010000000
	iwpriv wlan0 set_mib pwrdiffOFDM=4433333344455444554454444444
	ifconfig wlan0 down

	ifconfig wlan1 up
	iwpriv wlan1 set_mib xcap=71
	iwpriv wlan1 set_mib ther=34
	iwpriv wlan1 set_mib pwrlevel5GHT40_1S_A=00000000000000000000000000000000000000000000000000000000000000000000005f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5e5e5e5e5e5e5e5e5d5d5d5d5d5d5d5d5c5c5c5c5c5c5c5c5b5b5b5b5b5b5b5b5a5a5a5a5a5a5a5a595959595959595a5a5a5a5b5b5b5c5c5d5d5e5e5f5e5e5d5d5c5c5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5b5a5a5a5a5a5a5a5a5a5a5a5a5a5a5a5a5a00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrlevel5GHT40_1S_B=00000000000000000000000000000000000000000000000000000000000000000000005d5d5d5d5d5d5d5d5d5d5d5e5e5f5f60616162626262616161616161616161616060606060606060606060605f5f5f5f5f5f5f5f5f5f5f5f5e5e5e5e5e5e5e5e5e5e5e5e5d5d5d5d5d5d5d5d5d5d5d5d5d5d5d5e5e5f5f606161626261616060605f5f5f5f5f5f5f5f6060606060606060606060606161616161616160605f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_20BW1S_OFDM1T_A=00000000000000000000000000000000000000000000000000000000000000000000000202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_20BW1S_OFDM1T_B=00000000000000000000000000000000000000000000000000000000000000000000000202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020200000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_40BW2S_20BW2S_A=0000000000000000000000000000000000000000000000000000000000000000000000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_40BW2S_20BW2S_B=0000000000000000000000000000000000000000000000000000000000000000000000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_80BW1S_160BW1S_A=0000000000000000000000000000000000000000000000000000000000000000000000edededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededed00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_80BW1S_160BW1S_B=0000000000000000000000000000000000000000000000000000000000000000000000edededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededededed00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_80BW2S_160BW2S_A=0000000000000000000000000000000000000000000000000000000000000000000000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000000000000000000000000000000000
	iwpriv wlan1 set_mib pwrdiff_5G_80BW2S_160BW2S_B=0000000000000000000000000000000000000000000000000000000000000000000000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd00000000000000000000000000000000000000
	ifconfig wlan1 down
}

get_custom_mac() {
	. /lib/functions/system.sh
	local _mac_address_tag=""
	local _p1

	_p1=$(mtd_get_mac_binary config 13 | awk '{print toupper($1)}')
	[ ! -z "$_p1" ] && _mac_address_tag=$_p1

	echo "$_mac_address_tag"
}

set_switch_bridge_mode_on_boot() {
	local _disable_lan_ports="$1"

	if [ "$_disable_lan_ports" = "y" ]
	then
		# eth0
		swconfig dev switch0 vlan 9 set ports ''
		# eth1
		swconfig dev switch0 vlan 8 set ports '0 6'
	else
		# eth0
		swconfig dev switch0 vlan 9 set ports ''
		# eth1
		swconfig dev switch0 vlan 8 set ports '0 1 2 3 4 6'
	fi
}

custom_wan_port() {
	[ $1 == 1 ] && echo "switch0" || echo "0"
}
